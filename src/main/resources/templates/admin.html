<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ê´€ë¦¬ì í˜ì´ì§€</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #f7f8fa;
            text-align: center;
            padding: 50px;
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        .info {
            font-size: 16px;
            color: #666;
            margin-bottom: 30px;
        }
        button {
            background-color: #3b82f6;
            border: none;
            color: white;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: 0.2s;
            margin: 5px;
        }
        button:hover {
            background-color: #2563eb;
        }
    </style>
</head>
<body>

    <h1>ğŸ›  ê´€ë¦¬ì í˜ì´ì§€</h1>

    <div class="info">
        í˜„ì¬ DB ì €ì¥ëœ ê³µë§¤ ë°ì´í„° ê°œìˆ˜: <b th:text="${itemCount}">0</b> ê±´
    </div>

    <!-- í†µí•© ë°ì´í„° ìˆ˜ì§‘ ë²„íŠ¼ -->
    <button id="collectAllBtn" style="background-color:#10b981;">
        ë°ì´í„° í†µí•© ìˆ˜ì§‘ (ê¸°ë³¸ + ìƒì„¸)
    </button>

    <script>
        $("#collectAllBtn").click(function () {
            if (!confirm("ì •ë§ë¡œ ê³µë§¤ ë°ì´í„°ì™€ ìƒì„¸ ë°ì´í„°ë¥¼ ìƒˆë¡œ ìˆ˜ì§‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;

            $.post("/admin/collect-all", function (response) {
                alert(response);
                location.reload();
            }).fail(function (xhr) {
                alert("âŒ ìš”ì²­ ì‹¤íŒ¨: " + xhr.responseText);
            });
        });
    </script>

</body>
</html>
