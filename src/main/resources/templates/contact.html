<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ê³ ê°ì„¼í„°</title>
  <link rel="stylesheet" th:href="@{/css/style.css}">
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background-color: #f5f8fb;
      margin: 0;
      padding: 0;
    }

    header {
      text-align: center;
      padding: 60px 20px 30px;
      background: linear-gradient(135deg, #69b3f3, #4fc3a1);
      color: white;
      border-bottom-left-radius: 30px;
      border-bottom-right-radius: 30px;
    }

    main {
      max-width: 700px;
      margin: 40px auto;
      background: white;
      padding: 40px 50px;
      border-radius: 16px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
    }

    form label {
      display: block;
      margin-top: 18px;
      font-weight: 600;
      color: #333;
    }

    form input, form textarea {
      width: 100%;
      padding: 13px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 10px;
      font-size: 15px;
      box-sizing: border-box;
    }

    /* ì „ì—­ button ìŠ¤íƒ€ì¼ (ê¸°ì¡´) */
    button {
      margin-top: 25px;
      width: 100%;
      background: linear-gradient(90deg, #4fc3a1, #69b3f3);
      color: white;
      border: none;
      border-radius: 10px;
      padding: 14px;
      font-size: 17px;
      cursor: pointer;
    }

    /* íŒì—… ìŠ¤íƒ€ì¼ */
    #loginPopup {
      display: none; /* JSì—ì„œ 'flex'ë¡œ ì—´ë¦¼ */
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.5);
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .popup-content {
      background: white;
      border-radius: 12px;
      padding: 30px 40px;
      width: 340px;
      text-align: center;
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
      position: relative;
      box-sizing: border-box;
    }

    .popup-content h3 {
      margin: 6px 0 14px 0;
      color: #333;
      font-size: 18px;
    }

    .popup-content p {
      margin-bottom: 20px;
      color: #666;
      line-height: 1.6;
    }

    .popup-content a {
      display: inline-block;
      background: #4fc3a1;
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      text-decoration: none;
    }

    .popup-content a:hover {
      opacity: 0.9;
    }

    /* ë‹«ê¸°(X) ë²„íŠ¼ â€” ì „ì—­ button ê·œì¹™ë³´ë‹¤ ìš°ì„  ì ìš©ë˜ë„ë¡ êµ¬ì²´ì„± ë†’ì„ */
    .popup-content .close-btn {
      position: absolute !important;
      top: 10px !important;
      right: 12px !important;
      width: 36px !important;
      height: 36px !important;
      padding: 0 !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      font-size: 18px !important;
      line-height: 1 !important;
      border-radius: 8px !important;
      background: transparent !important;
      border: none !important;
      color: #666 !important;
      cursor: pointer !important;
      box-shadow: none !important;
    }

    .popup-content .close-btn:hover {
      color: #222 !important;
      background: rgba(0,0,0,0.04) !important;
    }

    /* success/message ìŠ¤íƒ€ì¼ (optional) */
    .success-message {
      text-align: center;
      color: #2ecc71;
      margin-top: 18px;
      font-weight: 600;
    }

    .back-home { text-align:center; margin-top:18px; }
    .back-home a { color:#0078d7; text-decoration:none; }
  </style>
</head>
<body>

<header>
  <h1>ğŸ’¬ ê³ ê°ì„¼í„° ë¬¸ì˜</h1>
  <p>ê¶ê¸ˆí•˜ì‹  ì ì´ë‚˜ ë¶ˆí¸ì‚¬í•­ì´ ìˆìœ¼ì‹ ê°€ìš”?<br>ì•„ë˜ ì–‘ì‹ì„ í†µí•´ ì–¸ì œë“ ì§€ ë¬¸ì˜í•´ ì£¼ì„¸ìš”.</p>
</header>

<main>
  <form id="contactForm" th:action="@{/contact}" method="post">
    <label for="name">ì´ë¦„</label>
    <input type="text" id="name" name="name" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" required>

    <label for="email">ì´ë©”ì¼</label>
    <input type="email" id="email" name="email" placeholder="ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>

    <label for="title">ì œëª©</label>
    <input type="text" id="title" name="title" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" required>

    <label for="content">ë¬¸ì˜ ë‚´ìš©</label>
    <textarea id="content" name="content" placeholder="ë¬¸ì˜ ë‚´ìš©ì„ ì‘ì„±í•´ì£¼ì„¸ìš”" required></textarea>

    <button type="submit">ë¬¸ì˜í•˜ê¸°</button>
  </form>

  <p th:if="${success}" class="success-message" th:text="${success}"></p>
  <p th:if="${message}" class="success-message" style="color:red;" th:text="${message}"></p>

  <div class="back-home">
    <a href="/">â† ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
  </div>
</main>

<!-- ë¡œê·¸ì¸ ìœ ë„ íŒì—… -->
<div id="loginPopup" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="popup-content">
    <button type="button" class="close-btn" id="closePopup" aria-label="ë‹«ê¸°">âœ•</button>
    <h3>ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤</h3>
    <p>ë¬¸ì˜í•˜ê¸°ëŠ” ë¡œê·¸ì¸ í›„ ì´ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    <a href="/user/login">ë¡œê·¸ì¸ í•˜ëŸ¬ê°€ê¸°</a>
  </div>
</div>

<!-- JS: ì•ˆì „í•˜ê²Œ ì‘ë™í•˜ë„ë¡ Thymeleaf inline ëŒ€ì‹  ì£¼ì„í˜• ì¹˜í™˜ ì‚¬ìš© -->
<script th:inline="javascript">
/* isLoggedIn ë³€ìˆ˜ë¥¼ ì„œë²„ì—ì„œ ì£¼ì…í•˜ì§€ ëª»í•˜ë©´ falseë¡œ ì•ˆì „í•˜ê²Œ ë™ì‘í•˜ë„ë¡ ì£¼ì„í˜• ì¹˜í™˜ ì‚¬ìš© */
const isLoggedIn = /*[[${session.loginUser != null}]]*/ false;

const contactForm = document.getElementById('contactForm');
const loginPopup = document.getElementById('loginPopup');
const closePopup = document.getElementById('closePopup');

contactForm.addEventListener('submit', function(e) {
  if (!isLoggedIn) {
    e.preventDefault();
    loginPopup.style.display = 'flex';
    loginPopup.setAttribute('aria-hidden', 'false');
  }
});

closePopup.addEventListener('click', function() {
  loginPopup.style.display = 'none';
  loginPopup.setAttribute('aria-hidden', 'true');
});
</script>

</body>
</html>
